<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Marc Guyer</title>
<meta name=description content="
Amazon Web Services (AWS) Specialist
REST API and Payment Systems Expert
Mentor, Asynchronous Communicator
Open Source Contributor
"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Marc Guyer","url":"\/\/marc.guyer.me\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"\/\/marc.guyer.me\/"}</script><meta property="og:title" content="Cloud Architect"><meta property="og:description" content="
Amazon Web Services (AWS) Specialist
REST API and Payment Systems Expert
Mentor, Asynchronous Communicator
Open Source Contributor
"><meta property="og:image" content="https://www.gravatar.com/avatar/e96773ada2643a59cf32d6e1407a7cc8?s=512"><meta property="og:url" content="//marc.guyer.me/"><meta property="og:type" content="website"><meta property="og:site_name" content="Marc Guyer"><meta name=twitter:title content="Cloud Architect"><meta name=twitter:description content="
Amazon Web Services (AWS) Specialist
REST API and Payment Systems Expert
Mentor, Asynchronous Communicator
Open Source Contributor
"><meta name=twitter:image content="https://www.gravatar.com/avatar/e96773ada2643a59cf32d6e1407a7cc8?s=512"><meta name=twitter:card content="summary_large_image"><link href='https://www.gravatar.com/avatar/e96773ada2643a59cf32d6e1407a7cc8?s=512' rel=icon type=image/x-icon><meta name=generator content="Hugo 0.147.3"><link rel=alternate href=//marc.guyer.me/index.xml type=application/rss+xml title="Marc Guyer"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css integrity=sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v6.6.0/css/all.css integrity=sha384-h/hnnw1Bi4nbpD6kE7nYfCXzovi622sY5WBxww8ARKwpdLj5kUWjRuyiXaD1U2JT crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css integrity=sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu crossorigin=anonymous><link rel=stylesheet href=//marc.guyer.me/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=//marc.guyer.me/css/syntax.css><link rel=stylesheet href=//marc.guyer.me/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous><script async src="https://www.googletagmanager.com/gtag/js?id=UA-69610431-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-69610431-1")</script></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=//marc.guyer.me/>Marc Guyer</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=Posts href=/posts/>Posts</a></li><li><a title=About href=/about/>About</a></li><li><a title=Contact href=/contact/>Contact</a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="Marc Guyer" href=//marc.guyer.me/><img class=avatar-img src="https://www.gravatar.com/avatar/e96773ada2643a59cf32d6e1407a7cc8?s=512" alt="Marc Guyer"></a></div></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=page-heading><h1>Marc Guyer</h1><hr class=small><span class=page-subheading>Cloud Architect</span></div></div></div></div></div></header><div role=main class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=well><ul><li>Amazon Web Services (AWS) Specialist</li><li>REST API and Payment Systems Expert</li><li>Mentor, Asynchronous Communicator</li><li>Open Source Contributor</li></ul></div><div class=posts-list><article class=post-preview><a href=//marc.guyer.me/posts/bref-php-pdo-postgresql-multi-architecture-example/><h2 class=post-title>Building Multi-Architecture AWS Lambda Functions with Bref PHP and PostgreSQL</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on 2024-05-15
&nbsp;(Last modified on 2025-05-15)
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;3&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;</span></p><div class=post-entry><h2 id=the-multi-architecture-challenge>The Multi-Architecture Challenge</h2><p>With the rise of Apple Silicon (ARM64) and the continued use of Intel-based (x86_64) systems, developers face increasing challenges in creating applications that work seamlessly across both architectures. This is especially true for PHP developers working with AWS Lambda, where subtle differences can lead to frustrating issues.</p><h2 id=example-with-bref-php-runtime--pdo-postgresql-extension>Example with Bref PHP Runtime + PDO PostgreSQL Extension</h2><p>To address these challenges, I&rsquo;ve created a comprehensive example repository that demonstrates a working multi-architecture implementation of PHP Lambda functions using <a href=https://bref.sh/>Bref</a> and PDO PostgreSQL. This example focuses on:</p><a href=//marc.guyer.me/posts/bref-php-pdo-postgresql-multi-architecture-example/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=//marc.guyer.me/tags/php/>php</a>&nbsp;
<a href=//marc.guyer.me/tags/aws/>aws</a>&nbsp;
<a href=//marc.guyer.me/tags/lambda/>lambda</a>&nbsp;
<a href=//marc.guyer.me/tags/bref/>bref</a>&nbsp;
<a href=//marc.guyer.me/tags/postgresql/>postgresql</a>&nbsp;
<a href=//marc.guyer.me/tags/docker/>docker</a>&nbsp;
<a href=//marc.guyer.me/tags/arm64/>arm64</a>&nbsp;
<a href=//marc.guyer.me/tags/apple-silicon/>apple-silicon</a>&nbsp;</div></article><article class=post-preview><a href=//marc.guyer.me/posts/mezzio-example/testing-doctrine-entities-and-repositories/><h2 class=post-title>Mezzio Example: Testing Doctrine Entities and Repositories</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on 2021-09-16
&nbsp;(Last modified on 2025-05-15)
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;6&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;</span></p><div class=post-entry><h2 id=overview>Overview</h2><p>In this post, we&rsquo;ll see how to create a comprehensive testing framework for Doctrine Entities and Repositories. This is a continuation of our <a href=/posts/mezzio-example/doctrine-entities-and-repositories/>Mezzio Example series</a> where we previously created our domain model for an OAuth2-enabled application.</p><p>Let&rsquo;s make sure our Entities and Repositories have full test coverage. The domain model is a significant part of any dynamic application so the code should be in good shape. We don&rsquo;t want any bugs here.</p><a href=//marc.guyer.me/posts/mezzio-example/testing-doctrine-entities-and-repositories/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=//marc.guyer.me/tags/php/>php</a>&nbsp;
<a href=//marc.guyer.me/tags/mezzio/>mezzio</a>&nbsp;
<a href=//marc.guyer.me/tags/laminas/>laminas</a>&nbsp;
<a href=//marc.guyer.me/tags/prophecy/>prophecy</a>&nbsp;
<a href=//marc.guyer.me/tags/phpunit/>phpunit</a>&nbsp;
<a href=//marc.guyer.me/tags/doctrine/>doctrine</a>&nbsp;
<a href=//marc.guyer.me/tags/oauth2/>oauth2</a>&nbsp;</div></article><article class=post-preview><a href=//marc.guyer.me/posts/mezzio-example/doctrine-entities-and-repositories/><h2 class=post-title>Mezzio Example: Doctrine Entities and Repositories</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on 2021-09-15
&nbsp;(Last modified on 2025-05-15)
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;5&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;</span></p><div class=post-entry><h2 id=overview>Overview</h2><p>This post brings several pieces of supporting libraries together.</p><h3 id=entities-to-support-oauth2-requirements>Entities to Support OAuth2 Requirements</h3><p>We&rsquo;ll start by defining a minimum domain model via PHP8 Attributes and Doctrine&rsquo;s new attribute mapping driver. In the short-term, we only need to model what&rsquo;s necessary for our application&rsquo;s authentication layer using OAuth2. For now, we&rsquo;re creating a minimal set of objects to comply with the needs of our supporting libraries&rsquo; interfaces. We need a minimum of 6 entities and their corresponding repositories:</p><a href=//marc.guyer.me/posts/mezzio-example/doctrine-entities-and-repositories/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=//marc.guyer.me/tags/php/>php</a>&nbsp;
<a href=//marc.guyer.me/tags/mezzio/>mezzio</a>&nbsp;
<a href=//marc.guyer.me/tags/laminas/>laminas</a>&nbsp;
<a href=//marc.guyer.me/tags/prophecy/>prophecy</a>&nbsp;
<a href=//marc.guyer.me/tags/phpunit/>phpunit</a>&nbsp;
<a href=//marc.guyer.me/tags/doctrine/>doctrine</a>&nbsp;
<a href=//marc.guyer.me/tags/oauth2/>oauth2</a>&nbsp;</div></article><article class=post-preview><a href=//marc.guyer.me/posts/mezzio-example/psalm-introduction/><h2 class=post-title>Mezzio Example: Psalm Introduction</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on 2021-09-15
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;</span></p><div class=post-entry><h2 id=what-is-psalm>What is Psalm?</h2><p><a href=https://psalm.dev>Psalm</a> is a static analysis tool for PHP that helps you identify problems with your code. If you use it, you&rsquo;ll become a better coder. I promise.</p><h3 id=learn-more-about-psalm>Learn more about Psalm</h3><p>Here&rsquo;s a great read &ndash; the story of the origins of Psalm at Vimeo and the value it provided the team.</p><p><a href=https://psalm.dev/articles/fixing-code-that-aint-broken>https://psalm.dev/articles/fixing-code-that-aint-broken</a></p><p>In this post, I&rsquo;ll show a basic setup for static analysis with Psalm in Mezzio applications.</p><a href=//marc.guyer.me/posts/mezzio-example/psalm-introduction/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=//marc.guyer.me/tags/php/>php</a>&nbsp;
<a href=//marc.guyer.me/tags/mezzio/>mezzio</a>&nbsp;
<a href=//marc.guyer.me/tags/laminas/>laminas</a>&nbsp;
<a href=//marc.guyer.me/tags/psalm/>psalm</a>&nbsp;</div></article><article class=post-preview><a href=//marc.guyer.me/posts/mezzio-example/functional-and-unit-testing/><h2 class=post-title>Mezzio Example: Functional and Unit Testing</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on 2019-12-01
&nbsp;(Last modified on 2021-09-16)
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;3&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;</span></p><div class=post-entry><h2 id=where-do-we-start>Where do we start?</h2><p>It&rsquo;s a good choice to start any application with a solid structure for testing the application with automated testing tools. That&rsquo;s why the first post in this series is about testing. Any well-tested application will typically have more lines of testing code than actual application code. Starting with a good structure for testing will pay dividends down the road.</p><p>In this post, I&rsquo;ll show a basic setup for testing Mezzio applications. We&rsquo;ll get to some more advanced testing topics in later posts.</p><a href=//marc.guyer.me/posts/mezzio-example/functional-and-unit-testing/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=//marc.guyer.me/tags/php/>php</a>&nbsp;
<a href=//marc.guyer.me/tags/mezzio/>mezzio</a>&nbsp;
<a href=//marc.guyer.me/tags/laminas/>laminas</a>&nbsp;
<a href=//marc.guyer.me/tags/prophecy/>prophecy</a>&nbsp;
<a href=//marc.guyer.me/tags/phpunit/>phpunit</a>&nbsp;</div></article><article class=post-preview><a href=//marc.guyer.me/posts/mezzio-example/introduction/><h2 class=post-title>Mezzio Example: Introduction</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on 2019-11-04
&nbsp;(Last modified on 2021-09-16)
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;</span></p><div class=post-entry><h2 id=what-is-this>What is this?</h2><p>Let&rsquo;s create a REST API with <a href=https://docs.mezzio.dev/>Mezzio</a>. In this series, you&rsquo;ll learn how to create a REST API from the ground up. We&rsquo;ll use Mezzio as the base framework, Doctrine for the data layer, OAuth2 for authentication and authorization, PHPUnit for automated testing, and several other libraries along the way.</p><h2 id=source-code>Source Code</h2><p>I&rsquo;ve created a new bare-bones application starting with the <a href=https://github.com/mezzio/mezzio-skeleton>Mezzio Skeleton Application</a> where all the code shown in this series lives. You can install it in your local environment and hack on it all you want. You&rsquo;re also welcome to contribute to the example application via PR. Check it out here:</p><a href=//marc.guyer.me/posts/mezzio-example/introduction/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=//marc.guyer.me/tags/php/>php</a>&nbsp;
<a href=//marc.guyer.me/tags/mezzio/>mezzio</a>&nbsp;
<a href=//marc.guyer.me/tags/laminas/>laminas</a>&nbsp;
<a href=//marc.guyer.me/tags/prophecy/>prophecy</a>&nbsp;
<a href=//marc.guyer.me/tags/phpunit/>phpunit</a>&nbsp;</div></article><article class=post-preview><a href=//marc.guyer.me/posts/example-recovery-procedure-for-mysql-backup-made-with-xtrabackup/><h2 class=post-title>Example Recovery Procedure for MySQL Backup Made with Xtrabackup</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on 2019-09-24
&nbsp;(Last modified on 2019-12-21)
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;3&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;</span></p><div class=post-entry><p>We have a pre-existing procedure for backing up a MySQL database using hot backups with the wonderful <a href=https://www.percona.com/doc/percona-xtrabackup/2.4/index.html>Percona Xtrabackup</a> and in this case the deprecated <a href=https://www.percona.com/doc/percona-xtrabackup/2.4/innobackupex/innobackupex_option_reference.html>innobackupex</a> binary.</p><p>Xtrabackup is nice since it creates a clean backup of InnoDB, XtraDB, and MyISAM tables quickly and <em>without locking</em>. There are countless useful features including point-in-time recovery, incremental backups, single table recovery, single partition recovery, I/O throttling, parallel processing, encryption, compression, streaming, and more.</p><p><strong>A basic recovery procedure document was needed so I wrote one. Here is is.</strong></p><a href=//marc.guyer.me/posts/example-recovery-procedure-for-mysql-backup-made-with-xtrabackup/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=//marc.guyer.me/tags/mysql/>mysql</a>&nbsp;
<a href=//marc.guyer.me/tags/xtrabackup/>xtrabackup</a>&nbsp;</div></article></div></div></div></div><div class=page-meta>(Last modified on 2025-05-15)</div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"></ul><p class="credits copyright text-muted">&nbsp;&bull;&nbsp;&copy;
2025
&nbsp;&bull;&nbsp;
<a href=//marc.guyer.me/>Marc Guyer</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.147.3</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a>
&nbsp;&bull;&nbsp;[<a href=https://github.com/marcguyer/marcguyer.github.io/commit/a253258841463454be3fa2830832fb4eb5cd39d3>a2532588</a>]</p></div></div></div></footer><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js integrity=sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload=renderMathInElement(document.body)></script><script src=https://code.jquery.com/jquery-3.7.0.slim.min.js integrity=sha384-w5y/xIeYixWvfM+A1cEbmHPURnvyqmVg5eVENruEdDjcyRLUSNej7512JQGspFUr crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js integrity=sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd crossorigin=anonymous></script><script src=//marc.guyer.me/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=//marc.guyer.me/js/load-photoswipe.js></script></body></html>